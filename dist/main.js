var e={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},d:(r,n)=>{for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r);const n=require("module");var t=e.n(n);const o=require("path");var a=e.n(o);const i=require("child_process"),s=require("fs");var c=e.n(s);const l=require("inspector");process.argv.join("").includes("--debug")&&((0,l.open)(),(0,l.waitForDebugger)());const d=require("sucrase"),p=require("sass"),u=require("electron"),m="dist"===a().basename(__dirname)?a().join(__dirname,"..","cache"):a().resolve(__dirname,"..","..","cache");c().existsSync(m)||c().mkdirSync(m),u.ipcMain.on("pccompat-get-app-path",(e=>{e.returnValue=u.app.getAppPath()})),u.ipcMain.on("pccompat-get-window-data",(e=>{e.returnValue=e.sender.kernelWindowData})),u.ipcMain.on("pccompat-compile-sass",((e,r)=>{let n="";try{n=p.compile(r).css.toString()}catch(r){e.sender.executeJavaScript(function(e){return`console.error(Object.assign(new Error(${JSON.stringify(e.message)}), {\n      stack: ${JSON.stringify(e.stack)},\n      name: ${JSON.stringify(e.name)}\n    }));`.trim()}(r))}e.returnValue=n})),u.ipcMain.on("pccompat-compile-jsx",((e,r)=>{if(!c().existsSync(r))return void(e.returnValue="");const n=c().readFileSync(r,"utf8");let t=0;for(let e=0;e<n.length;e++)t=(t<<5)-t+n.charCodeAt(e),t&=t;try{e.returnValue=c().readFileSync(a().join(m,t.toString()),"utf-8")}catch{const{code:o}=d.transform(n,{transforms:["jsx","imports","typescript"],filePath:r});c().writeFileSync(a().join(m,t.toString()),o),e.returnValue=o}})),u.ipcMain.handle("pccompat-open-devtools",((e,r)=>{const n=u.BrowserWindow.fromWebContents(e.sender);n&&(r&&!n.webContents.isDevToolsOpened()?n.webContents.openDevTools():n.webContents.closeDevTools())}));const y=a().resolve("dist"===a().basename(__dirname)?a().resolve(__dirname,".."):__dirname,"node_modules");if(!c().existsSync(y)&&!__dirname.includes(".asar"))try{(0,i.execSync)("npm install --production",{cwd:__dirname})}catch(e){console.error("Failed to automatically install node modules:",e)}t().globalPaths.push(y);var _=exports;for(var f in r)_[f]=r[f];r.__esModule&&Object.defineProperty(_,"__esModule",{value:!0});