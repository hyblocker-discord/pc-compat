var e={n:r=>{var o=r&&r.__esModule?()=>r.default:()=>r;return e.d(o,{a:o}),o},d:(r,o)=>{for(var n in o)e.o(o,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:o[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r);const o=require("module");var n=e.n(o);const t=require("path");var s=e.n(t);const a=require("child_process"),i=require("fs");var c=e.n(i);const l=require("inspector");process.argv.join("").includes("--debug")&&((0,l.open)(),(0,l.waitForDebugger)());const p=require("sucrase"),u=require("sass"),d=require("electron");d.ipcMain.on("pccompat-get-app-path",(e=>{e.returnValue=d.app.getAppPath()})),d.ipcMain.on("pccompat-get-window-data",(e=>{e.returnValue=e.sender.kernelWindowData})),d.ipcMain.on("pccompat-compile-sass",((e,r)=>{let o="";try{o=u.compile(r).css.toString()}catch(r){e.sender.executeJavaScript(function(e){return`\nconsole.error(Object.assign(new Error(${JSON.stringify(e.message)}), {\n    stack: ${JSON.stringify(e.stack)},\n    name: ${JSON.stringify(e.name)}\n}));`.trim()}(r))}e.returnValue=o})),d.ipcMain.on("pccompat-compile-jsx",((e,r)=>{if(!c().existsSync(r))return void(e.returnValue="");const o=c().readFileSync(r,"utf8"),{code:n}=p.transform(o,{transforms:["jsx","imports","typescript"],filePath:r});e.returnValue=n})),d.ipcMain.handle("pccompat-open-devtools",((e,r)=>{const o=d.BrowserWindow.fromWebContents(e.sender);o&&(r&&!o.webContents.isDevToolsOpened()?o.webContents.openDevTools():o.webContents.closeDevTools())}));const m=s().resolve(__dirname,"..","node_modules");if(!c().existsSync(m))try{(0,a.execSync)("npm install --production",{cwd:__dirname})}catch(e){console.error("Failed to automatically install node modules:",e)}n().globalPaths.push(m);var f=exports;for(var y in r)f[y]=r[y];r.__esModule&&Object.defineProperty(f,"__esModule",{value:!0});