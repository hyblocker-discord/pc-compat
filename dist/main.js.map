{"version":3,"file":"main.js","sources":["../src/main/debug.ts","../src/common/ipcevents.ts","../src/main/events.ts","../src/main/index.ts"],"sourcesContent":["import {waitForDebugger, open} from \"inspector\";\r\n\r\nif (process.argv.join(\"\").includes(\"--debug\")) {\r\n    open();\r\n    waitForDebugger();\r\n}","// Main\r\nexport const MAIN_EVENT = \"pccompat-main-event\";\r\nexport const COMPILE_SASS = \"pccompat-compile-sass\";\r\nexport const COMPILE_JSX = \"pccompat-compile-jsx\";\r\nexport const GET_APP_PATH = \"pccompat-get-app-path\";\r\nexport const SET_DEV_TOOLS = \"pccompat-open-devtools\";\r\n\r\n// Preload\r\nexport const EXPOSE_PROCESS_GLOBAL = \"pccompat-expose-process-global\";","import sucrase from \"sucrase\";\r\nimport sass from \"sass\";\r\nimport {ipcMain, app, BrowserWindow} from \"electron\";\r\nimport * as IPCEvents from \"../common/ipcevents\";\r\nimport fs from \"fs\";\r\n\r\nipcMain.on(IPCEvents.GET_APP_PATH, (event) => {\r\n    event.returnValue = app.getAppPath();\r\n});\r\n\r\nipcMain.on(IPCEvents.COMPILE_SASS, (event, file) => {\r\n    let result = \"\";\r\n    try {\r\n        // @ts-ignore\r\n        let abc = sass.renderSync({file});\r\n        result = abc.css.toString();\r\n    } catch (error) {\r\n        console.error(error);\r\n    }\r\n\r\n    event.returnValue = result;\r\n});\r\n\r\nipcMain.on(IPCEvents.COMPILE_JSX, (event, file) => {\r\n    if (!fs.existsSync(file)) {\r\n        event.returnValue = \"\";\r\n        return;\r\n    }\r\n\r\n    const filecontent = fs.readFileSync(file, \"utf8\");\r\n\r\n    const {code} = sucrase.transform(filecontent, {\r\n        transforms: [\"jsx\", \"imports\", \"typescript\"],\r\n        filePath: file\r\n    });\r\n\r\n    event.returnValue = code;\r\n});\r\n\r\nipcMain.handle(IPCEvents.SET_DEV_TOOLS, (event, value: boolean) => {\r\n    const win = BrowserWindow.fromWebContents(event.sender);\r\n\r\n    if (!win) return;\r\n\r\n    if (value && !win.webContents.isDevToolsOpened()) {\r\n        win.webContents.openDevTools();\r\n    } else {\r\n        win.webContents.closeDevTools();\r\n    }\r\n});","import Module from \"module\";\r\nimport path from \"path\";\r\n\r\n// @ts-ignore\r\nModule.globalPaths.push(path.resolve(__dirname, \"node_modules\"));\r\n\r\nimport \"./debug\";\r\nimport \"./events\";"],"names":["process","argv","join","includes","open","waitForDebugger","COMPILE_SASS","COMPILE_JSX","GET_APP_PATH","SET_DEV_TOOLS","ipcMain","on","IPCEvents","event","returnValue","app","getAppPath","file","result","abc","sass","renderSync","css","toString","error","console","fs","existsSync","filecontent","readFileSync","code","sucrase","transform","transforms","filePath","handle","value","win","BrowserWindow","fromWebContents","sender","webContents","isDevToolsOpened","openDevTools","closeDevTools","Module","globalPaths","push","path","resolve","__dirname"],"mappings":";;;;;;;;;;;;;;;;;;AAEA,IAAIA,OAAO,CAACC,IAAI,CAACC,IAAI,CAAC,IAAIC,QAAQ,CAAC,YAAY;IAC3CC,cAAI;IACJC,yBAAe;AACnB;;ACLA;AAEO,MAAMC,YAAY,GAAG;AACrB,MAAMC,WAAW,GAAG;AACpB,MAAMC,YAAY,GAAG;AACrB,MAAMC,aAAa,GAAG;;ACC7BC,gBAAO,CAACC,EAAE,CAACC,YAAsB,GAAGC,KAAK,GAAK;IAC1CA,KAAK,CAACC,WAAW,GAAGC,YAAG,CAACC,UAAU;AACtC,CAAC;AAEDN,gBAAO,CAACC,EAAE,CAACC,YAAsB,GAAGC,KAAK,EAAEI,IAAI,GAAK;IAChD,IAAIC,MAAM,GAAG;IACb,IAAI;;QAEA,IAAIC,GAAG,GAAGC,wBAAI,CAACC,UAAU,CAAC;YAACJ,IAAI;SAAC;QAChCC,MAAM,GAAGC,GAAG,CAACG,GAAG,CAACC,QAAQ;KAC5B,CAAC,OAAOC,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAACA,KAAK;KACtB;IAEDX,KAAK,CAACC,WAAW,GAAGI,MAAM;AAC9B,CAAC;AAEDR,gBAAO,CAACC,EAAE,CAACC,WAAqB,GAAGC,KAAK,EAAEI,IAAI,GAAK;IAC/C,KAAKS,sBAAE,CAACC,UAAU,CAACV,IAAI,GAAG;QACtBJ,KAAK,CAACC,WAAW,GAAG;QACpB;KACH;IAED,MAAMc,WAAW,GAAGF,sBAAE,CAACG,YAAY,CAACZ,IAAI,EAAE;IAE1C,MAAM,EAACa,IAAI,GAAC,GAAGC,2BAAO,CAACC,SAAS,CAACJ,WAAW,EAAE;QAC1CK,UAAU,EAAE;YAAC;YAAO;YAAW;SAAa;QAC5CC,QAAQ,EAAEjB,IAAI;KACjB;IAEDJ,KAAK,CAACC,WAAW,GAAGgB,IAAI;AAC5B,CAAC;AAEDpB,gBAAO,CAACyB,MAAM,CAACvB,aAAuB,GAAGC,KAAK,EAAEuB,KAAc,GAAK;IAC/D,MAAMC,GAAG,GAAGC,sBAAa,CAACC,eAAe,CAAC1B,KAAK,CAAC2B,MAAM;IAEtD,KAAKH,GAAG,EAAE;IAEV,IAAID,KAAK,KAAKC,GAAG,CAACI,WAAW,CAACC,gBAAgB,IAAI;QAC9CL,GAAG,CAACI,WAAW,CAACE,YAAY;KAC/B,MAAM;QACHN,GAAG,CAACI,WAAW,CAACG,aAAa;KAChC;AACL,CAAC;;AC9CD;AACAC,0BAAM,CAACC,WAAW,CAACC,IAAI,CAACC,wBAAI,CAACC,OAAO,CAACC,SAAS,EAAE;;"}